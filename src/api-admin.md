# 上海深森广告打印后台管理系统 API 文档

## 概述

本文档描述了上海深森广告打印后台管理系统所需的API接口，针对当前已实现的功能模块。

- 基础URL: `/api/v1`
- 数据格式: 所有请求和响应均使用JSON格式

---

## 1. 会员管理

### 1.1 会员注册

- **URL**: `/member/register`
- **方法**: POST
- **描述**: 注册新会员
- **请求参数**:

```json
{
  "phone": "13812345678",
  "confirmPhone": "13812345678",
  "initialAmount": 0.00
}
```

- **响应**:

```json
{
  "code": 200,
  "message": "会员注册成功",
  "data": {
    "phone": "13812345678",
    "balance": 0.00,
    "createdAt": "2023-08-01T12:00:00Z"
  }
}
```

### 1.2 会员信息查询

- **URL**: `/member/info`
- **方法**: GET
- **描述**: 根据手机号查询会员信息
- **请求参数**:

```
?phone=13812345678
```

- **响应**:

```json
{
  "code": 200,
  "message": "查询成功",
  "data": {
    "phone": "13812345678",
    "balance": 150.00,
    "totalRecharge": 500.00,
    "totalSpent": 350.00,
    "lastVisit": "2023-07-28T14:30:00Z"
  }
}
```

- **错误响应** (会员不存在):

```json
{
  "code": 404,
  "message": "会员不存在",
  "data": null
}
```

---

## 2. 金额变更

### 2.1 会员充值/消费

- **URL**: `/transaction/process`
- **方法**: POST
- **描述**: 会员账户充值或消费
- **请求参数**:

```json
{
  "phone": "13812345678",
  "amount": 100.00,
  "type": "RECHARGE" // RECHARGE, CONSUME
}
```

- **响应**:

```json
{
  "code": 200,
  "message": "处理成功",
  "data": {
    "phone": "13812345678",
    "amount": 100.00,
    "type": "RECHARGE",
    "balance": 250.00,
    "createdAt": "2023-08-01T12:30:00Z"
  }
}
```

- **错误响应** (余额不足):

```json
{
  "code": 400,
  "message": "余额不足",
  "data": {
    "balance": 30.00,
    "required": 50.00
  }
}
```

## 4. 错误码说明

| 错误码 | 描述 |
|--------|------|
| 200 | 成功 |
| 400 | 请求参数错误 |
| 404 | 资源不存在 |
| 500 | 服务器内部错误 |

---

## 5. 开发注意事项

1. 所有金额相关的计算和存储，精度统一保留到小数点后2位
2. 会员手机号作为唯一标识，注册时需要验证唯一性和两次输入一致性
3. 交易记录一旦创建不能修改或删除 